(require 'pcb)

(ert-deftest pcb-extract-nets ()
  (should
   (cl-tree-equal (with-current-buffer (find-file-noselect "examples/original-atreus-pcb.lisp")
                    (pcb-extract-nets (read (buffer-string))))
                  '((net 0 "") (net 1 N-row-0) (net 2 N-row-1) (net 3 N-row-2)
                    (net 4 N-row-3) (net 5 N-col-0) (net 6 N-col-1) (net 7 N-col-2)
                    (net 8 N-col-3) (net 9 N-col-4) (net 10 N-col-5) (net 11 N-col-6)
                    (net 12 N-col-7) (net 13 N-col-8) (net 14 N-col-9) (net 15 N-col-10)
                    (net 16 N-diode-0) (net 17 N-diode-1) (net 18 N-diode-2)
                    (net 19 N-diode-3) (net 20 N-diode-4) (net 21 N-diode-5)
                    (net 22 N-diode-6) (net 23 N-diode-7) (net 24 N-diode-8)
                    (net 25 N-diode-9) (net 26 N-diode-10) (net 27 N-diode-11)
                    (net 28 N-diode-12) (net 29 N-diode-13) (net 30 N-diode-14)
                    (net 31 N-diode-15) (net 32 N-diode-16) (net 33 N-diode-17)
                    (net 34 N-diode-18) (net 35 N-diode-19) (net 36 N-diode-20)
                    (net 37 N-diode-21) (net 38 N-diode-22) (net 39 N-diode-23)
                    (net 40 N-diode-24) (net 41 N-diode-25) (net 42 N-diode-26)
                    (net 43 N-diode-27) (net 44 N-diode-28) (net 45 N-diode-29)
                    (net 46 N-diode-30) (net 47 N-diode-31) (net 48 N-diode-32)
                    (net 49 N-diode-33) (net 50 N-diode-34) (net 51 N-diode-35)
                    (net 52 N-diode-36) (net 53 N-diode-37) (net 54 N-diode-38)
                    (net 55 N-diode-39) (net 56 N-diode-40) (net 57 N-diode-41)))))
